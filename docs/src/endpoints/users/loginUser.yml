tags:
  - Identity API
summary: "Creates authentication token"
description: "Creates authentication token for the user"
operationId: "login user"
security: []
requestBody:
  required: true
  description: "Credentials"
  content:
    application/json:
      schema:
        required:
          - email
          - password
        type: object
        properties:
          email:
            type: string
            format: email
          password:
            type: string
            format: password
            pattern: '^(?=.*[A-Z])(?=.*[0-9])(?=.*[a-z]).{8,}$'
responses:
  201:
    description: "Authentication token is created"
    content:
      application/json:
        schema:
          type: object
          properties:
            data:
              $ref: "../../schemas/UserWithToken.yml"
            status:
              type: string
              enum: ['success', 'error']
              default: 'success'
              description: Status for overall request
  400:
    $ref: "../../errors/http400.yml"
  451:
    description: "User has not signed the RALA agreement"
    content:
      application/json:
        schema:
          type: object
          properties:
            status:
              type: string
              enum: ['success', 'error']
              default: 'error'
              description: Status for overall request
            code:
              type: string
              default: 'ralaNotSigned'
            message:
              type: string
              default: 'Before logging in you need to sign the latest RALA document, please use the sign rala endpoint as described in the API reference, using the provided token and document id from this response'
            data:
              type: object
              properties:
                token:
                  type: string
                  default: 'token'
                tokenExpiresAt:
                  type: string
                  format: date-time
                rala:
                  $ref: '../../schemas/SignedDocument.yml'
